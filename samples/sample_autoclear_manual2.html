<!DOCTYPE HTML>
<html><!-- InstanceBegin template="/Templates/template_demo.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<!-- InstanceBeginEditable name="doctitle" -->
	<title>easyCanvas for Javascript - demo and sample code</title>
	<!-- InstanceEndEditable -->
	<link rel="stylesheet" type="text/css" href="../css/demos.css">
	<script type="text/javascript" src="../easyCanvas.1.3.js"></script>
	<script type="text/javascript" src="../js/code.js"></script>
	<!-- InstanceBeginEditable name="head" -->
	<!-- InstanceEndEditable -->
</head>

<body>

	<header>
		<a href="http://easycanvasjs.com/"><img src="../gfx/logo1.png" width="100" height="45" alt="easyCanvasJS"></a>
		<div class="moreSamples">For more demos and samples visit <a href="http://easycanvasjs.com/samples.html">easyCanvasJS / samples</a></div>
	</header>
	
	<div id="content">
		<section id="main"><!-- InstanceBeginEditable name="Main" -->
		<h1>Using optimized manual Auto-Clear mode</h1>
		
		<div class="instr">After we initialize we call startAutoClear() to start Auto-Clear manually. Everytime mouse
		touch down we manually update background by calling updateAutoClear(). On mouse move we clear (or reset) background
		by calling clearBackground(region) which will only redraw the part we actually used resulting in higher performance (and 
		it's possible to define several regions).
		This do the same as the property autoClear but manually doing this increases the
		possibilities when you need to deal with more complex and dynamic backgrounds.</div>
		
		<canvas id="demo" class="canvasFull" width="800" height="400" style="background:#ff9;cursor:crosshair">Sorry, your browser does not support the canvas element.
			Please consider upgrading to a modern HTML5 compliant browser such as Chrome or Firefox.</canvas>
		<!-- InstanceEndEditable -->
			<div id="info">-</div>
			
			<h2>The code in essence:</h2>
			
<!-- InstanceBeginEditable name="CodeEssence" --><pre data-code="js">
ez.startAutoClear();
	
ez.onmousedown = function() {
	ez.updateAutoClear();
}

ez.onmousemove = function(e) {
	ez.clearBackground(regionToClear);
}

</pre><!-- InstanceEndEditable -->

			<h2>Full code:</h2>
			
			<pre data-code="js" id="codePre">Automatically inserted</pre>
			
		</section>
		
		<section id="rightside">
		
			<h2>Parameters</h2>
			<!-- InstanceBeginEditable name="Parameters" -->
			<div class="para">
				<div>None for this demo.</div>
			</div>
			<!-- InstanceEndEditable --></section>
	</div>		
	<footer>
		All examples are provided under the same license as easyCanvas, GPL-3.0.
		<div id="abdias"></div>
	</footer>
<!-- InstanceBeginEditable name="Code" --><script id="codeJS" type="text/javascript">
var ez = (new easyCanvas('demo')).startAutoClear(), /// start auto-clear mode
	oldRect; /// store used region

ez.onmousedown = function() {
	/// reset old region when we start drawing
	oldRect = null
	
	/// snapshot current content
	ez.updateAutoClear();
}

ez.onmousemove = function(e) {

    /// if we have an old region redraw only that part
	if (oldRect !== null) ez.clearBackground(oldRect); /// clear only used region
	ez.line(ez.firstX, ez.firstY, e.x, e.y);
	
	/// get used part of canvas by providing start and current end points
	oldRect = ez.getRect(ez.firstX, ez.firstY, e.x, e.y);
}
</script>
<!-- InstanceEndEditable -->
<script type="text/javascript">codeFormatter()</script>
</body>
<!-- InstanceEnd --></html>
